spring.application.name=kabengosafaris
# -----------------------------------------
# Database Configuration
# -----------------------------------------
spring.datasource.url=jdbc:mysql://${MYSQL_HOST:localhost}:3306/springboot_itineraryledger_kabengosafaris
spring.datasource.username=root
spring.datasource.password=

# -----------------------------------------
# JPA / Hibernate Configuration
# -----------------------------------------

# Allows Spring JPA to generate DDL (tables, constraints) based on your entities
spring.jpa.generate-ddl=true

# Tells Hibernate to automatically update the database schema to match entities
# (useful in dev, not recommended for production)
# spring.jpa.hibernate.ddl.auto=update

# Same as above (preferred property name); keeps schema updated automatically
spring.jpa.hibernate.ddl-auto=update

# Set the Hibernate SQL dialect so it generates SQL optimized for MySQL 8
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect

# Format generated SQL queries for readable logging output
spring.jpa.properties.hibernate.format-sql=true


# -----------------------------------------
# Server / Error Handling
# -----------------------------------------

# Include error messages in API error responses (helpful for debugging)
server.error.include-message=always

# -----------------------------------------
# SQL Initialization
# -----------------------------------------

# Disable running schema.sql or data.sql files at startup
spring.sql.init.mode=never

# -----------------------------------------
# Server Port
# -----------------------------------------

# Change the default server port from 8080 to 4450
server.port=4450

# -----------------------------------------
# Dev Tools
# -----------------------------------------

# Enable automatic restart when Java files change (for faster development)
spring.devtools.restart.enabled=true

# -----------------------------------------
# Logging Configuration
# -----------------------------------------

# Set logging levels for different packages
logging.level.root=INFO
logging.level.com.itineraryledger.kabengosafaris=DEBUG
logging.level.org.springframework.security=DEBUG

# -----------------------------------------
# Audit Logging Configuration
# -----------------------------------------
# NOTE: These are FALLBACK/DEFAULT values. The actual configuration is stored in the
# 'audit_log_settings' database table and can be dynamically modified at runtime via
# AuditLogSettingServices without requiring an application restart.
#
# The AuditLogSettingInitializer component (runs at application startup) loads these
# default values into the database if they don't already exist.

# Enable async processing for audit logs to avoid blocking requests
spring.task.execution.pool.core-size=2
spring.task.execution.pool.max-size=5
spring.task.execution.pool.queue-capacity=100

# Audit log retention (in days) - logs older than this will be cleaned up
audit.log.retention.days=90

# Enable or disable audit logging globally
audit.log.enabled=true

# Whether to capture IP address in audit logs
audit.log.capture.ip.address=true

# Whether to capture User-Agent in audit logs
audit.log.capture.user.agent=true

# Whether to capture old values before updates in audit logs
audit.log.capture.old.values=true

# Whether to capture new values after updates in audit logs
audit.log.capture.new.values=true

# Comma-separated list of fields to exclude from audit logs (case-insensitive)
audit.log.excluded.fields=password,token,secret,apikey,creditcard

# Maximum length of captured old/new values (to prevent huge JSON strings)
audit.log.max.value.length=2048


# -----------------------------------------
# Security Settings Configuration
# -----------------------------------------
# NOTE: These are FALLBACK/DEFAULT values used if database settings are not available.
# The actual configuration is stored in the 'security_settings' database table and can be
# dynamically modified at runtime via SecuritySettingsService.
#
# The SecuritySettingsInitializer component (runs at application startup with highest priority)
# loads these values into the database if they don't already exist.

# JWT Token Settings
security.jwt.expiration.time.minutes=180
security.mfa.jwt.expiration.time.seconds=180
security.registration.jwt.expiration.time.minutes=60
security.jwt.refresh.expiration.time.minutes=10080

# ID Obfuscation Settings
security.idObfuscator.obfuscated.length=70
security.idObfuscator.salt.length=21

# Password Policy Settings
security.password.min.length=8
security.password.max.length=128
security.password.require.uppercase=true
security.password.require.lowercase=true
security.password.require.numbers=true
security.password.require.special.characters=true
security.password.expiration.days=90
security.password.history.count=5

# Account Lockout Settings
security.account-lockout.max-failed-attempts=5
security.account-lockout.lockout-duration-minutes=30
security.account-lockout.enabled=true
security.account-lockout.counter-reset-hours=24

# Login Rate Limiting Settings (Token Bucket Algorithm)
security.login-rate-limit.max-capacity=5
security.login-rate-limit.refill-rate=5
security.login-rate-limit.refill-duration-minutes=1
security.login-rate-limit.enabled=true

# -----------------------------------------
# Session Management
# -----------------------------------------
# Disable Spring Session JDBC
spring.session.store-type=none
# OR exclude the auto-configuration
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.session.SessionAutoConfiguration

# -----------------------------------------
# Email Configuration & Encryption
# -----------------------------------------
# Encryption key for email configuration secrets
# Format: Base64-encoded AES-256 key (32 bytes / 256 bits)
# Generate a key: You can use an online base64 encoder or set EMAIL_ENCRYPTION_KEY environment variable
# For production, ALWAYS set the EMAIL_ENCRYPTION_KEY environment variable instead of hardcoding here
# email.encryption.key=YOUR_BASE64_ENCODED_KEY_HERE

# -----------------------------------------
# Email Signature Configuration
# -----------------------------------------
# Directory path for storing email signature files
# Files will be stored as: {signature.storage.path}/{accountName}_{signatureName}_{timestamp}.html
email.signature.storage.path=/opt/lampp/htdocs/kabengosafaris/ItineraryLedger/email-signatures/

# Maximum file size for signature uploads (in bytes) - 1MB
email.signature.max.file.size=1048576

# Allowed file extensions for signature files (comma-separated)
email.signature.allowed.extensions=html,txt

# -----------------------------------------
# Email Template Configuration
# -----------------------------------------
# Directory path for storing email event template files
# Files will be stored as: {template.storage.path}/{eventName}_{templateName}_{timestamp}.html
email.template.storage.path=/opt/lampp/htdocs/kabengosafaris/ItineraryLedger/email-templates/

# Maximum file size for template uploads (in bytes) - 2MB
email.template.max.file.size=2097152

# -----------------------------------------
# Application URL Configuration
# -----------------------------------------
# Base URL for the application (used for generating activation links, password reset links, etc.)
# For development: http://localhost:4450
# For production: https://yourdomain.com
app.base.url=http://localhost:4450